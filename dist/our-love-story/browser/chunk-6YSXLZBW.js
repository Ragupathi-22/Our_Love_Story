import{h as H}from"./chunk-5QGMLV5L.js";import{e as G}from"./chunk-UJEK63FD.js";import{a as O,b as p,c as Y,d as U,g as W,h as z,i as J,k as K,m as Q}from"./chunk-PUBC3ITG.js";import{la as B,na as V,qa as j}from"./chunk-S6UWFWRQ.js";import{l as L,p as A}from"./chunk-QOLEAA67.js";import{j as P,l as M,q as b}from"./chunk-7BREBM4O.js";import"./chunk-42PG76QE.js";import{Db as F,Ib as R,Jb as o,Kb as T,Qb as c,Ua as a,Wb as q,_a as v,db as y,ga as S,ha as D,ia as I,ib as u,ja as k,qb as s,ub as r,vb as e,wb as l,xb as _,yb as E,zb as N}from"./chunk-5KRWD2P7.js";import{f as x}from"./chunk-KT3CPUTC.js";var h=class t{message="Loading...";static \u0275fac=function(m){return new(m||t)};static \u0275cmp=y({type:t,selectors:[["app-loading-spinner"]],inputs:{message:"message"},decls:6,vars:1,consts:[[1,"flex","items-center","gap-2"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-5","w-5","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8v4l3.5-3.5L12 0v4a8 8 0 100 16v4l3.5-3.5L12 20v-4a8 8 0 01-8-8z",1,"opacity-75"],[1,"text-white"]],template:function(m,i){m&1&&(r(0,"div",0),I(),r(1,"svg",1),l(2,"circle",2)(3,"path",3),e(),k(),r(4,"span",4),o(5),e()()),m&2&&(a(5),T(i.message))},dependencies:[b],encapsulation:2})};var f=t=>({"border-red-500":t});function re(t,n){t&1&&(r(0,"p",27),o(1,"Your name is required"),e())}function ne(t,n){t&1&&(r(0,"p",27),o(1,"Partner's name is required"),e())}function oe(t,n){t&1&&(r(0,"p",27),o(1,"Your DOB is required"),e())}function ae(t,n){t&1&&(r(0,"p",27),o(1,"Partner's DOB is required"),e())}function se(t,n){t&1&&(r(0,"p",27),o(1,"Please select this special date"),e())}function me(t,n){t&1&&(r(0,"p",27),o(1,"Valid email is required"),e())}function le(t,n){t&1&&(r(0,"p",27),o(1,"Minimum 6 characters required"),e())}function pe(t,n){t&1&&(_(0),o(1," Register "),E())}function de(t,n){t&1&&l(0,"app-loading-spinner",28),t&2&&s("message","Registering...")}var X=class t{constructor(n,m,i,g,C){this.fb=n;this.auth=m;this.firestore=i;this.router=g;this.toastr=C;this.registerForm=this.fb.group({yourName:["",p.required],partnerName:["",p.required],yourDob:["",p.required],partnerDob:["",p.required],loveStartDate:["",p.required],email:["",[p.required,p.email]],password:["",[p.required,p.minLength(6)]]})}registerForm;btnHitter=!1;yesterday;errorMessage="";ngOnInit(){let n=new Date;n.setDate(n.getDate()-1),this.yesterday=n.toISOString().split("T")[0]}isInvalid(n){let m=this.registerForm.get(n);return m?.invalid&&(m?.dirty||m?.touched)||!1}onSubmit(){return x(this,null,function*(){if(this.btnHitter=!0,this.registerForm.valid){let{email:n,password:m,yourName:i,partnerName:g,yourDob:C,partnerDob:Z,loveStartDate:$}=this.registerForm.value;try{let d=(yield A(this.auth,n,m)).user.uid,ee=V(this.firestore,"users",d);yield j(ee,{uid:d,email:n,yourName:i,partnerName:g,yourDob:C,partnerDob:Z,loveStartDate:$,createdAt:new Date,timeline:[],gallery:[],playlistUrl:[]}),this.toastr.success("Registration successful!","Welcome"),this.router.navigate(["/admin/layout"])}catch(w){console.error("Registration failed:",w);let d="Registration failed. Please try again later.";switch(w.code){case"auth/email-already-in-use":d="This email is already registered. Please log in or use another.";break;case"auth/invalid-email":d="The email address is invalid.";break;case"auth/operation-not-allowed":d="Email/password sign-in is disabled. Contact support.";break;case"auth/weak-password":d="Password is too weak. Use at least 6 characters.";break}this.errorMessage=d,this.toastr.error(d,"Registration Failed")}finally{this.btnHitter=!1}}else this.btnHitter=!1,this.registerForm.markAllAsTouched(),this.toastr.warning("Please complete all required fields.","Validation Error")})}static \u0275fac=function(m){return new(m||t)(v(K),v(L),v(B),v(G),v(H))};static \u0275cmp=y({type:t,selectors:[["app-registration"]],decls:52,vars:34,consts:[["loadingTemplate",""],[1,"min-h-screen","flex","items-center","justify-center","bg-gradient-to-br","from-pink-50","via-rose-50","to-red-50","p-4"],[1,"w-full","max-w-lg","shadow-2xl","border-0","bg-white/80","backdrop-blur-sm","rounded-lg"],[1,"text-center","space-y-4","px-6","py-6"],[1,"mx-auto","w-16","h-16","bg-gradient-to-br","from-white-500","to-pink-500","rounded-full","flex","items-center","justify-center"],[1,"text-white","text-2xl"],[1,"text-3xl","font-bold","bg-gradient-to-r","from-pink-600","to-rose-600","bg-clip-text","text-transparent"],[1,"text-gray-600"],[1,"space-y-4","px-6","pb-6",3,"ngSubmit","formGroup"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["for","yourName",1,"block","text-sm","font-medium"],["id","yourName","type","text","formControlName","yourName",1,"w-full","rounded-md","border-gray-300","shadow-sm","focus:border-pink-500","focus:ring-pink-500","mt-2","p-2",3,"ngClass"],["class","text-sm text-red-500",4,"ngIf"],["for","partnerName",1,"block","text-sm","font-medium"],["id","partnerName","type","text","formControlName","partnerName",1,"w-full","rounded-md","border-gray-300","shadow-sm","focus:border-pink-500","focus:ring-pink-500","mt-2","p-2",3,"ngClass"],["for","yourDob",1,"block","text-sm","font-medium"],["id","yourDob","type","date","formControlName","yourDob",1,"w-full","rounded-md","border-gray-300","shadow-sm","focus:border-pink-500","focus:ring-pink-500","mt-2","p-2",3,"max","ngClass"],["for","partnerDob",1,"block","text-sm","font-medium"],["id","partnerDob","type","date","formControlName","partnerDob",1,"w-full","rounded-md","border-gray-300","shadow-sm","focus:border-pink-500","focus:ring-pink-500","mt-2","p-2",3,"max","ngClass"],["for","loveStartDate",1,"block","text-sm","font-medium","text-pink-600"],["id","loveStartDate","type","date","formControlName","loveStartDate",1,"w-full","rounded-md","border-gray-300","shadow-sm","focus:border-pink-500","focus:ring-pink-500","mt-2","p-2",3,"ngClass"],["for","email",1,"block","text-sm","font-medium"],["id","email","type","email","formControlName","email",1,"w-full","rounded-md","border-gray-300","shadow-sm","focus:border-pink-500","focus:ring-pink-500","mt-2","p-2",3,"ngClass"],["for","password",1,"block","text-sm","font-medium"],["id","password","type","password","formControlName","password",1,"w-full","rounded-md","border-gray-300","shadow-sm","focus:border-pink-500","focus:ring-pink-500","mt-2","p-2",3,"ngClass"],["type","submit",1,"w-full","py-2","rounded-md","text-white","font-semibold","bg-gradient-to-r","from-pink-500","to-rose-500","hover:from-pink-600","hover:to-rose-600","transition","flex","justify-center","items-center","gap-2",3,"disabled"],[4,"ngIf","ngIfElse"],[1,"text-sm","text-red-500"],[3,"message"]],template:function(m,i){if(m&1){let g=N();r(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"span",5),o(5,"\u{1F495}"),e()(),r(6,"h2",6),o(7,"Love Story Admin"),e(),r(8,"p",7),o(9,"Create your beautiful love story dashboard"),e()(),r(10,"form",8),F("ngSubmit",function(){return S(g),D(i.onSubmit())}),r(11,"div",9)(12,"div")(13,"label",10),o(14,"Your Name"),e(),l(15,"input",11),u(16,re,2,0,"p",12),e(),r(17,"div")(18,"label",13),o(19,"Partner's Name"),e(),l(20,"input",14),u(21,ne,2,0,"p",12),e()(),r(22,"div",9)(23,"div")(24,"label",15),o(25,"Your DOB"),e(),l(26,"input",16),u(27,oe,2,0,"p",12),e(),r(28,"div")(29,"label",17),o(30,"Partner's DOB"),e(),l(31,"input",18),u(32,ae,2,0,"p",12),e()(),r(33,"div")(34,"label",19),o(35," \u{1F496} The Day Our Love Story Began "),e(),l(36,"input",20),u(37,se,2,0,"p",12),e(),r(38,"div")(39,"label",21),o(40,"Email"),e(),l(41,"input",22),u(42,me,2,0,"p",12),e(),r(43,"div")(44,"label",23),o(45,"Password"),e(),l(46,"input",24),u(47,le,2,0,"p",12),e(),r(48,"button",25),u(49,pe,2,0,"ng-container",26)(50,de,1,1,"ng-template",null,0,q),e()()()()}if(m&2){let g=R(51);a(10),s("formGroup",i.registerForm),a(5),s("ngClass",c(20,f,i.isInvalid("yourName"))),a(),s("ngIf",i.isInvalid("yourName")),a(4),s("ngClass",c(22,f,i.isInvalid("partnerName"))),a(),s("ngIf",i.isInvalid("partnerName")),a(5),s("max",i.yesterday)("ngClass",c(24,f,i.isInvalid("yourDob"))),a(),s("ngIf",i.isInvalid("yourDob")),a(4),s("max",i.yesterday)("ngClass",c(26,f,i.isInvalid("partnerDob"))),a(),s("ngIf",i.isInvalid("partnerDob")),a(4),s("ngClass",c(28,f,i.isInvalid("loveStartDate"))),a(),s("ngIf",i.isInvalid("loveStartDate")),a(4),s("ngClass",c(30,f,i.isInvalid("email"))),a(),s("ngIf",i.isInvalid("email")),a(4),s("ngClass",c(32,f,i.isInvalid("password"))),a(),s("ngIf",i.isInvalid("password")),a(),s("disabled",i.btnHitter),a(),s("ngIf",!i.btnHitter)("ngIfElse",g)}},dependencies:[b,P,M,Q,W,O,Y,U,z,J,h],encapsulation:2})};export{X as RegistrationComponent};
